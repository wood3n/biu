# 实现收藏夹加载更多功能

## 问题分析

1. 当前收藏夹列表只显示第一页数据，没有加载更多功能
2. `user.ts` 中的 `collectedFolder` 状态直接替换，不支持数据追加
3. 缺少分页状态管理（当前页码、是否有更多数据）
4. `getFavFolderCollectedList` 接口返回的数据结构中缺少 `has_more` 字段

## 实现方案

### 1. 修改 UserState 接口

* 添加 `collectedFolderPn` 字段记录当前页码

* 添加 `collectedFolderHasMore` 字段记录是否有更多数据

* 添加 `collectedFolderTotal` 字段记录总数量

### 2. 修改 updateCollectedFolder 方法

* 支持初始化和追加两种模式

* 记录分页状态

* 保留原有数据并追加新数据

### 3. 添加 loadMoreCollectedFolder 方法

* 用于加载更多收藏夹数据

* 将当前页码 `pn` 加 1

* 追加新数据到原有列表

### 4. 修改 collection/index.tsx

* 添加"显示剩余{count}个"文字

* 根据 `has_more` 状态决定是否显示

* 实现点击加载更多功能

### 5. 调整接口调用

* 确认 `getFavFolderCollectedList` 接口是否支持 `has_more` 字段

* 如果不支持，考虑使用 `getFavFolderCreatedList` 接口

\
搜索

## 具体实现步骤

1. 修改 `src/store/user.ts`：

   * 更新 `UserState` 接口，添加分页相关字段

   * 修改 `updateCollectedFolder` 方法，支持数据追加

   * 添加 `loadMoreCollectedFolder` 方法

2. 修改 `src/layout/side/collection/index.tsx`：

   * 添加加载更多文字

   * 实现点击事件

   * 根据 `has_more` 状态控制显示

3. 测试功能：

   * 确保初始加载正常

   * 确保加载更多功能正常

   * 确保数据正确追加

   * 确保没有更多数据时隐藏加载更多文字

